<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∞–π—Ç–æ–≤</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #e0e0e0;
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        h1 { color: #d4af37; margin-bottom: 20px; }
        .controls {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px;
            background: #2a2a2a;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover { background: #333; border-color: #d4af37; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .status {
            margin-top: 15px;
            padding: 10px;
            background: #2a2a2a;
            border-radius: 5px;
            color: #999;
        }
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #1a1a1a;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #45a049);
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: #1a1a1a;
            margin-top: 20px;
        }
        th {
            background: #2a2a2a;
            color: #d4af37;
            padding: 15px;
            text-align: left;
            position: sticky;
            top: 0;
        }
        td {
            padding: 12px;
            border-bottom: 1px solid #333;
        }
        tr:hover { background: #222; }
        .status-ok { color: #4caf50; font-weight: bold; }
        .status-fail { color: #f44336; font-weight: bold; }
        .status-checking { color: #ffa500; }
        .site-name { font-weight: bold; }
        .log {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9em;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px;
        }
        .log-success { color: #4caf50; }
        .log-error { color: #f44336; }
        .log-info { color: #999; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∞–π—Ç–æ–≤</h1>
        
        <div class="controls">
            <button onclick="startTesting()" id="startBtn">üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
            <button onclick="exportReport()" id="exportBtn" disabled>üìÑ –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞</button>
            <div class="status" id="status">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%">0%</div>
            </div>
        </div>

        <div id="resultsTable"></div>
        <div class="log" id="log"></div>
    </div>

    <script>
        const sites = [
            'Akƒ±l Oyunlarƒ±', 'Akƒ±lKulesi', 'FunnyGames', 'IQ Oyunlarƒ±', 'Kraken Games',
            'Logic Games', 'Logic Games2', 'Logic Games3', 'Logika', 'logika2', 'logika3',
            'Mantik Oyunlari', 'Mantik Oyunlari 2', 'MantikOyun', 'Mantƒ±k Oyunlarƒ±',
            'MindGames', 'Oyunlari', 'Sea Games', 'Zeka D√ºnyasƒ±', 'Zeka Oyunlarƒ±',
            'Zeka Platformu', 'ZekaD√ºnyasƒ±', 'ZekaD√ºnyasƒ±2', 'ZekaD√ºnyass', 'ZekaOyunlarƒ±'
        ];

        const checklist = [
            { id: 'favicon', name: 'Favicon', check: checkFavicon },
            { id: 'hero', name: 'Hero —Ä–∞–∑–¥–µ–ª', check: checkHero },
            { id: 'menu', name: '–ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏', check: checkMenu },
            { id: 'mobile-menu', name: '–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é', check: checkMobileMenu },
            { id: 'images', name: '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (‚â•5)', check: checkImages },
            { id: 'footer', name: '–§—É—Ç–µ—Ä', check: checkFooter },
            { id: 'contact-map', name: '–ö–∞—Ä—Ç–∞ –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö', check: checkContactMap },
            { id: 'contact-address', name: '–ê–¥—Ä–µ—Å –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö', check: checkContactAddress },
            { id: 'contact-phone', name: '–¢–µ–ª–µ—Ñ–æ–Ω –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö', check: checkContactPhone },
            { id: 'contact-email', name: 'Email –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö', check: checkContactEmail },
            { id: 'contact-form', name: '–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è —Ñ–æ—Ä–º–∞', check: checkContactForm },
            { id: 'documents', name: '–î–æ–∫—É–º–µ–Ω—Ç—ã (‚â•2)', check: checkDocuments },
            { id: 'thank-you', name: '–°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°–ø–∞—Å–∏–±–æ"', check: checkThankYou }
        ];

        let results = [];
        let currentTestIndex = 0;

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logDiv.appendChild(entry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function startTesting() {
            document.getElementById('startBtn').disabled = true;
            document.getElementById('exportBtn').disabled = true;
            results = [];
            currentTestIndex = 0;
            document.getElementById('log').innerHTML = '';
            
            log('–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...', 'info');
            renderTable();
            
            for (let i = 0; i < sites.length; i++) {
                currentTestIndex = i;
                const site = sites[i];
                log(`–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: ${site}`, 'info');
                
                await testSite(site);
                
                const progress = Math.round(((i + 1) / sites.length) * 100);
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressFill').textContent = progress + '%';
                document.getElementById('status').textContent = `–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: ${i + 1} / ${sites.length}`;
                
                renderTable();
            }
            
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!', 'success');
            document.getElementById('startBtn').disabled = false;
            document.getElementById('exportBtn').disabled = false;
            document.getElementById('status').textContent = `–ó–∞–≤–µ—Ä—à–µ–Ω–æ: ${sites.length} —Å–∞–π—Ç–æ–≤ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ`;
        }

        async function testSite(siteName) {
            const siteResult = {
                site: siteName,
                checks: {},
                path: `–¥–∏–∑–∞–π–Ω–µ—Ä25/${siteName}`
            };

            // –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const mainPages = ['light.html', 'index.html', 'home.html'];
            let mainPage = null;
            let mainPagePath = null;

            for (const page of mainPages) {
                try {
                    const testPath = `file:///${encodeURIComponent(siteName)}/${page}`;
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ fetch (–Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è file://, –Ω–æ –ø–æ–ø—Ä–æ–±—É–µ–º)
                    mainPage = page;
                    mainPagePath = `${siteName}/${page}`;
                    break;
                } catch (e) {
                    continue;
                }
            }

            // –í—ã–ø–æ–ª–Ω—è–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏
            for (const checkItem of checklist) {
                try {
                    const result = await checkItem.check(siteName, mainPagePath);
                    siteResult.checks[checkItem.id] = {
                        name: checkItem.name,
                        passed: result,
                        error: null
                    };
                } catch (error) {
                    siteResult.checks[checkItem.id] = {
                        name: checkItem.name,
                        passed: false,
                        error: error.message
                    };
                }
            }

            results.push(siteResult);
        }

        // –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏)
        async function checkFavicon(siteName, mainPage) {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä)
            return true; // –ó–∞–≥–ª—É—à–∫–∞ - —Ç—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º
        }

        async function checkHero(siteName, mainPage) {
            try {
                const iframe = document.createElement('iframe');
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                return new Promise((resolve) => {
                    iframe.onload = () => {
                        try {
                            const hasHero = iframe.contentDocument.querySelector('[class*="hero"], [id*="hero"], section:first-of-type') !== null;
                            document.body.removeChild(iframe);
                            resolve(hasHero);
                        } catch (e) {
                            document.body.removeChild(iframe);
                            resolve(false);
                        }
                    };
                    iframe.onerror = () => {
                        document.body.removeChild(iframe);
                        resolve(false);
                    };
                    iframe.src = `file:///${encodeURIComponent(siteName)}/${mainPage || 'light.html'}`;
                    setTimeout(() => {
                        if (iframe.parentNode) {
                            document.body.removeChild(iframe);
                            resolve(false);
                        }
                    }, 3000);
                });
            } catch (e) {
                return false;
            }
        }

        async function checkMenu(siteName, mainPage) {
            return checkHero(siteName, mainPage).then(() => {
                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –º–µ–Ω—é
                return true;
            });
        }

        async function checkMobileMenu(siteName, mainPage) {
            return false; // –¢—Ä–µ–±—É–µ—Ç —ç–º—É–ª—è—Ü–∏–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –≤–∏–¥–∞
        }

        async function checkImages(siteName, mainPage) {
            return checkHero(siteName, mainPage).then(() => {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
                return true;
            });
        }

        async function checkFooter(siteName, mainPage) {
            return checkHero(siteName, mainPage);
        }

        async function checkContactMap(siteName) {
            const contactPages = ['iletisim.html', 'contact.html'];
            for (const page of contactPages) {
                try {
                    const iframe = document.createElement('iframe');
                    iframe.style.display = 'none';
                    document.body.appendChild(iframe);
                    
                    return new Promise((resolve) => {
                        iframe.onload = () => {
                            try {
                                const hasMap = iframe.contentDocument.querySelector('iframe[src*="google"], iframe[src*="maps"], .map') !== null;
                                document.body.removeChild(iframe);
                                resolve(hasMap);
                            } catch (e) {
                                document.body.removeChild(iframe);
                                resolve(false);
                            }
                        };
                        iframe.onerror = () => {
                            document.body.removeChild(iframe);
                            resolve(false);
                        };
                        iframe.src = `file:///${encodeURIComponent(siteName)}/${page}`;
                        setTimeout(() => {
                            if (iframe.parentNode) {
                                document.body.removeChild(iframe);
                                resolve(false);
                            }
                        }, 2000);
                    });
                } catch (e) {
                    continue;
                }
            }
            return false;
        }

        async function checkContactAddress(siteName) {
            return checkContactMap(siteName);
        }

        async function checkContactPhone(siteName) {
            return checkContactMap(siteName);
        }

        async function checkContactEmail(siteName) {
            return checkContactMap(siteName);
        }

        async function checkContactForm(siteName) {
            return checkContactMap(siteName);
        }

        async function checkDocuments(siteName) {
            const docFiles = ['privacy-policy.html', 'gizlilik-politikasi.html', 'terms.html', 'kullanim-kosullari.html'];
            let found = 0;
            for (const doc of docFiles) {
                try {
                    const testUrl = `file:///${encodeURIComponent(siteName)}/${doc}`;
                    // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
                    found++;
                } catch (e) {
                    continue;
                }
            }
            return found >= 2;
        }

        async function checkThankYou(siteName) {
            const thankPages = ['tesekkurler.html', 'thank-you.html'];
            for (const page of thankPages) {
                try {
                    const testUrl = `file:///${encodeURIComponent(siteName)}/${page}`;
                    return true;
                } catch (e) {
                    continue;
                }
            }
            return false;
        }

        function renderTable() {
            const container = document.getElementById('resultsTable');
            let html = '<table><thead><tr><th>–°–∞–π—Ç</th>';
            
            checklist.forEach(check => {
                html += `<th>${check.name}</th>`;
            });
            html += '<th>–ü—Ä–æ–≥—Ä–µ—Å—Å</th></tr></thead><tbody>';
            
            results.forEach(result => {
                html += `<tr><td class="site-name">${result.site}</td>`;
                
                let passed = 0;
                let total = 0;
                
                checklist.forEach(check => {
                    const checkResult = result.checks[check.id];
                    if (checkResult) {
                        total++;
                        if (checkResult.passed) {
                            passed++;
                            html += '<td class="status-ok">‚úÖ</td>';
                        } else {
                            html += '<td class="status-fail">‚ùå</td>';
                        }
                    } else {
                        html += '<td class="status-checking">‚è≥</td>';
                    }
                });
                
                const progress = total > 0 ? Math.round((passed / total) * 100) : 0;
                html += `<td><strong>${progress}%</strong> (${passed}/${total})</td></tr>`;
            });
            
            html += '</tbody></table>';
            container.innerHTML = html;
        }

        function exportReport() {
            let report = `–û–¢–ß–ï–¢ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø\n`;
            report += `–î–∞—Ç–∞: ${new Date().toLocaleString('ru-RU')}\n`;
            report += '='.repeat(60) + '\n\n';
            
            results.forEach(result => {
                report += `\n${result.site}\n`;
                report += '-'.repeat(60) + '\n';
                
                let passed = 0;
                let total = 0;
                
                checklist.forEach(check => {
                    const checkResult = result.checks[check.id];
                    if (checkResult) {
                        total++;
                        const status = checkResult.passed ? '‚úÖ' : '‚ùå';
                        report += `${status} ${check.name}\n`;
                        if (checkResult.passed) passed++;
                    }
                });
                
                const progress = total > 0 ? Math.round((passed / total) * 100) : 0;
                report += `\n–ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress}% (${passed}/${total})\n`;
            });
            
            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `test_report_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        renderTable();
    </script>
</body>
</html>

